---
description: 
globs: 
alwaysApply: true
---
# 個人ブログ

## フレームワーク・ライブラリ

- フレームワーク：Astro + React
- パッケージ管理: pnpm
- スタイリング: Tailwind CSS
- PaaS: Cloudflare Pages（SSG）
- コンテンツ管理：MDX（ブログ）、SpeakerDeck RSS（登壇資料）

## 機能

- 各ページの内容は次の通り。

| path | description |
| --- | --- |
| / | トップページ。現在はブログ一覧とほぼ同じものを表示する |
| /blog | ブログ一覧ページ |
| /blog/[:slug] | ブログ詳細ページ |
| /talk | 登壇一覧ページ |
| /talk/[:slug] | 登壇詳細ページ |

- レスポンシブに対応
- ダークモードに対応
- ブログ記事のドラフト機能
- ページネーション機能
- SNSリンク（GitHub, X, Zenn, SpeakerDeck, SizuMe）
- RSSフィード対応

### 未対応

- OSのテーマには未対応
- 動的OGP生成の対応
- ブログ記事のカテゴリ分け（tech, idea, life）：一部MDXに設定があるが、表示はしていない。
- ブログ記事のタグ付け：一部MDXに設定があるが、表示はしていない。

## 実装方針

- UIは極力Astroコンポーネントで実装し、どうしても実装できないケースでのみReactで実装する。
- E2Eテストでビジュアルリグレッションテストを実施。ただしGitHub Actions上でフォントが読み込まれず実行できないこと、コンテンツが動的に変わることから、現在は活用できていない。
- コンテンツ管理は以下の方針で実施。手段にはAstro Content Layerを利用している。
  - ブログ記事：MDXファイルで管理
  - 登壇資料：SpeakerDeckのRSSフィードを利用して自動取得

## ディレクトリ構造

refs: Astroが予約しているディレクトリはsrc/pages/とsrc/content/だけです。

### 現状のディレクトリ構成

```
.
├── e2e             # E2Eテスト (Playwright)
├── public          # 静的ファイル (faviconなど)
├── src             # ソースコード
│   ├── assets        # 画像などのアセット
│   ├── components    # 再利用可能なUIコンポーネント (Astro/React)
│   ├── content       # コンテンツコレクションの定義 (Astro Content Collections)
│   ├── data          # ブログ記事のMDXファイル
│   ├── features      # 特定機能に関連するコンポーネントやロジック
│   ├── layouts       # ページ全体のレイアウトコンポーネント
│   ├── pages         # 各ページのルーティングとコンポーネント
│   ├── styles        # グローバルなCSS (Tailwindの@applyなど)
│   ├── stylesheet    # CSSファイル (markdown.cssなど)
│   └── utils         # ユーティリティ関数
├── astro.config.mjs  # Astroの設定ファイル
├── biome.jsonc       # Biome (Linter/Formatter) の設定ファイル
├── package.json      # npmパッケージ管理
├── tailwind.config.mjs # Tailwind CSSの設定ファイル
├── tsconfig.json     # TypeScriptの設定ファイル
└── ... (その他の設定ファイル)
```

### 将来的なディレクトリ構成

- src以外は現状のディレクトリ構成と変更なし
- srcについては以下のように変更したい。
- ディレクトリ構造は [Feature-Sliced Design](mdc:https:/feature-sliced.github.io/documentation) を参考にする

```
├── src             # ソースコード
│   ├── assets        # 画像などのアセット
│   ├── components    
│   │   └── ui        # 特定機能に依存しない再利用可能な共通のUIコンポーネント
│   ├── content       # コンテンツコレクションの定義 (Astro Content Collections)
│   ├── data          # ブログ記事のMDXファイル
│   ├── features      # 特定機能に関連するコンポーネントやロジック、ページ
│   ├── layouts       # 特定機能に依存しないページ全体のレイアウトコンポーネント
│   └── pages         # 各ページのルーティングを担うためのエントリポイント。実態はfeaturesに配置してimportする。
```

### 記事データのディレクトリ構造

```
├── data
│   ├── blog    
│   │   └── [slug]
│   │   │   └── [slug]
│   │   │   │   └── imageファイル
│   │   │   │   └── index.mdx
```

