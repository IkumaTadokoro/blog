---
title: "CSSグリッドマン Tailwindモード"
description: "目を覚ませ僕らの世界（Flex）が何者かに侵略されてるぞ〜"
pubDate: "2023-05-17T19:59:00"
category: "CSS"
tags: [CSS, CSSGrid, TailwindCSS]
draft: true
---

import Tweet from "@components/Tweet.vue";
import Youtube from "@components/Youtube.vue";

タイトルは出落ち感あるので、これ以上触りません。

職場でのコードレビューでもちょいちょい「Flexbox で縦横揃えずとも、Grid でやった方がシンプルに書けるので Grid どうですか？」と書いたり、自分自身も手癖で Flexbox で書いてしまうことが結構あります。

こういう時にさっとググるといい感じに解説してくれる記事は結構出てくるのですが、スタイリングが Tailwind CSS で行われていたりすると脳内変換が毎度面倒だなと思っていたので、Tailwind CSS ベースでの CSS Grid 利用を自分用のチートシートとしてまとめます。

## まとめ

ここにまとめを書く

## どういうときに Grid Layout を使うのか

https://drafts.csswg.org/css-grid/

Grid Layout 実装のモチベーションについては、[1.1. Background and Motivation](https://drafts.csswg.org/css-grid/#background)に次のように記載があります。

> As websites evolved from simple documents into complex, interactive applications, techniques for document layout, e.g. floats, were not necessarily well suited for application layout. By using a combination of tables, JavaScript, or careful measurements on floated elements, authors discovered workarounds to achieve desired layouts. Layouts that adapted to the available space were often brittle and resulted in counter-intuitive behavior as space became constrained. As an alternative, authors of many web applications opted for a fixed layout that cannot take advantage of changes in the available rendering space on a screen.The capabilities of grid layout address these problems. It provides a mechanism for authors to divide available space for layout into columns and rows using a set of predictable sizing behaviors.

そして Flexbox との関係性については、[Introduction](https://drafts.csswg.org/css-grid/#intro)に次のように記載があります。

> Although many layouts can be expressed with either Grid or Flexbox, they each have their specialties. Grid enforces 2-dimensional alignment, uses a top-down approach to layout, allows explicit overlapping of items, and has more powerful spanning capabilities. Flexbox focuses on space distribution within an axis, uses a simpler bottom-up approach to layout, can use a content-size–based line-wrapping system to control its secondary axis, and relies on the underlying markup hierarchy to build more complex layouts. It is expected that both will be valuable and complementary tools for CSS authors.

ざっくりまとめると以下の 3 点かなと思います。

1. Grid Layout は Flexbox の完全代替ではない。
2. Grid Layout は 2 次元の、Flexbox では 1 次元のレイアウトを組むことができる。
3. Grid Layout はトップダウン、つまり親要素に指定することでレイアウトを組むのに対して、Flexbox はその逆で子要素に幅等を指定することでレイアウトを組む。

ここから「どういうときに Grid Layout を使いますか？」という質問に対しては、「全体のレイアウトを組むときや 2 次元のレイアウトを組むとき」くらいで考えておけばいいのではないかと私は思います
（ページ全体のレイアウトを親側から指定できれば全体の見通しが良くなりますし、ボトムアップに各要素を組む Flexbox よりもレイアウトのための div が不要になるメリットがあります）。

## Tailwind CSS での Grid Layout 作例集

ここからひたすら Grid Layout を Tailwind CSS で実装したサンプルを紹介していきます。

### 上下中央揃え

```html
<!-- 1つの要素を上下中央揃え -->
<div class="grid place-content-center">
  <div class="box"></div>
</div>

<!-- 複数の要素を上下中央揃え -->
<div class="grid place-content-center place-items-center">
  <div class="box"></div>
  <p class="typography">ぴったん、たんた、もじぴったん</p>
</div>
```

![tw_sample_place-content](/blog/tailwind-css-gridman/tw_sample_place-content.png)

https://play.tailwindcss.com/ogiOO63I1Q

頻出パターンです。`place-content-center`で行列方向に中央に配置しています。また 2 つ目の例では`place-items-center`で配置されたアイテム自体の中央揃えも行っています。

2 つ目のパターンを Flexbox で実装すると、一度全体の箱を中央揃えにした後、中のアイテムに Flex を適用してさらに中央揃えにする必要があるので、レイアウトのための不要な div タグが必要になります。

```html
<div class="flex items-center justify-center">
  <div class="flex flex-col justify-center items-center">
    <div class="box"></div>
    <p class="typography">ぴったん、たんた、もじぴったん</p>
  </div>
</div>
```

---

（編集中）

## 付録:Tailwind CSS における Grid Layout のプロパティ

### Display

```html
<div class="grid">...</div>
```

要素に対して Grid Container を有効にするために指定します。Grid Container を有効にすることで、子要素が Grid Item として認識されるようになります。

生成される CSS は次のようになります。

```css
.grid {
  display: grid;
}
```

サンプルはこちらです。

https://play.tailwindcss.com/WirYsVhDmY

devtool で検証すると、Grid Container が形成されていることを確認できると思います。

![tw_grid](/blog/tailwind-css-gridman/tw_grid.png)

### Grid Template Columns ・ Grid Template Rows

Grid Template Columns は列トラックの、Grid Template Rows は行トラックの幅と要素数をそれぞれ指定します。

本来の`grid-template-columns`、`grid-template-rows`では個別に幅を指定することで柔軟なレイアウトを実現しますが、Tailwind CSS のユーティリティクラスでは、画一的な要素幅しか用意されていません。

```html
<div class="grid grid-cols-3">...</div>
```

```css
.grid-cols-3 {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}
```

そのため、もし指定した幅（比率指定含む）でのレイアウトが必要であれば、Arbitrary Values を使用する必要があります。
本来の CSS でスペース区切りで指定する各トラックの幅は、`_`で区切ることで指定できます。

```html
<div class="grid grid-rows-[200px_minmax(900px,_1fr)_100px]">...</div>
```

サンプルはこちらです。1 つ目のサンプルではユーティリティクラスによって画一の幅に、2 つ目のサンプルでは Arbitrary Values によって 1:2 の比率でトラックが指定されています。

![tw_grid_template](/blog/tailwind-css-gridman/tw_grid_template.png)

https://play.tailwindcss.com/eWZWHXqI1j

refs: [3.2. Grid Tracks and Cells](https://drafts.csswg.org/css-grid/#grid-track-concept)

### （未対応） Grid Template Area ・ Grid Area

Tailwind CSS には Grid Layout の`grid-template-areas`、`grid-area`が存在しません。まあゴリゴリにユースケースに合わせた記述になるので、仕方がないですね。

### Grid Column Start / End ・ Grid Row Start / End

Grid Column Start / End は列の、Grid Row Start / End は行の、開始位置・終了位置・サイズ（スパン）を指定します。

```html
<div class="grid grid-cols-2">
  <div class="row-span-1">...</div>
  <div class="">...</div>
  <div class="">...</div>
</div>
```

```css
.row-span-1 {
  grid-row: span 1 / span 1;
}
```

指定できるユーティリティクラスは次の 4 種類です（行方向の場合は適宜 col を row に読み替えてください）。

1. `col-auto`
2. `col-span-{n}`
3. `col-start-{n}`
4. `col-end-{n}`

微妙に分かりにくいのですが、`grid-column-start`、`grid-column-end`、それらのショートハンドである`grid-column`が Tailwind CSS の公式リファレンスだと同じページにまとまっています。

一般的な CSS の場合、「2 つ目のグリッドラインから 3 つ分の幅を持つ」という指定は`grid-column: 2 / span 3`となりますが、Tailwind CSS では`col-start-2 col-span-3`となり、これを CSS に起こし直すと以下のようになります。

```css
.grid-item-sample {
  grid-column-start: 2;
  grid-column: span 3 / span 3;
}
```

`grid-column`一本でいけるのに、重複が発生していてややもどかしいですね。例によって Arbitrary Values によって`col-[16_/_span_16]`のように定義はできるのですが、スペース部分を`_`にするのを忘れそうなので、大人しくユーティリティクラスを使った方が良さそうです。

サンプルはこちらです。

https://play.tailwindcss.com/bT9ztURBnr

![tw_grid_template](/blog/tailwind-css-gridman/tw_grid_template.png)

refs: [8.3. Line-based Placement: the grid-row-start, grid-column-start, grid-row-end, and grid-column-end properties](https://drafts.csswg.org/css-grid/#line-placement)

### Grid Auto Flow

Grid Auto Flow はグリッドアイテムの配置方法を指定します。本来のプロパティ名は`grid-auto-flow`です。
Tailwind CSS では、`grid-flow-row`、`grid-flow-col`、`grid-flow-row-dense`、`grid-flow-col-dense`の 4 種類のユーティリティクラスが用意されています。

```html
<div class="grid grid-cols-2 grid-rows-2 grid-flow-col">
  <div>...</div>
  <div>...</div>
  <div>...</div>
  <div>...</div>
</div>
```

サンプルはこちらです。

![tw_grid_auto_flow](/blog/tailwind-css-gridman/tw_grid_auto_flow.png)

https://play.tailwindcss.com/w8JYHPOYOM

見ての通り、デフォルトでは行方向に整列します。

### Grid Auto Columns ・ Grid Auto Rows

Grid Auto Columns は列について、Grid Auto Rows は行について、`grid-template-columns`、`grid-template-rows` で指定したトラックの外側に自動的に生成されるトラックの幅を指定します。

本来のプロパティ名は`grid-auto-xxx`です。

```html
<!-- 3列のトラックからなるGridを作成する -->
<div class="grid-cols-3 auto-cols-min">
  <div>...</div>
  <div>...</div>
  <div>...</div>
  <!-- トラックの終端のラインからトラックを始める。 -->
  <!-- auto-cols-minにより、コンテンツの最小幅（この例だと分割できる単語のうち、もっとも文字が長い...っていっても日本語は全部同じなので一文字分の長さ）でトラックが生成される -->
  <div class="col-start-4">ちゅ、多様性</div>
</div>
```

本来の`grid-auto-xxx`には px や比率を指定することができますが、Tailwind CSS で指定できるのは次の 4 つです。

- `auto-cols-auto`: ブラウザが自動的にトラックサイズを決める
- `auto-cols-min`: コンテンツの最小幅でトラックサイズを決める
- `auto-cols-max`: コンテンツの最大幅でトラックサイズを決める
- `auto-cols-fr`: 残りのスペースを等分する

### Justify Content ・ Align Content ・ Place Content

Justify Content と Align Content は Flexbox でも頻出なので割愛します。Place Content は Justify Content と Align Content のショートハンドです。

### Justify Items ・ Align Items ・ Place Items

Justify Items と Align Items は Flexbox でも頻出なので割愛します。Place Items は Justify Items と Align Items のショートハンドです。

### Justify Self ・ Align Self ・ Place Self

Justify Self と Align Self は Flexbox でも頻出なので割愛します。Place Self は Justify Self と Align Self のショートハンドです。

### Gap

Gap は各トラックの間隔を指定します。`gap-x-{n}`で x 軸方向、`gap-y-{n}`で y 軸方向、`gap-{n}`で両方向の間隔を指定します。

### Order

Order はグリッドアイテムの表示順序を指定します。`order-{n}`で指定します。
